<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="GISChat website."><meta name=author content="GISChat Team"><link href=https://gischat.xyz/blog/ rel=canonical><link href=../introduction/ rel=prev><link href=category/hardware/ rel=next><link rel=icon href=../assets/GISchat.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.28"><title>Welcome to My Blog - GISChat</title><link rel=stylesheet href=../assets/stylesheets/main.6543a935.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#welcome-to-my-blog class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=GISChat class="md-header__button md-logo" aria-label=GISChat data-md-component=logo> <img src=../assets/GISchat.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> GISChat </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Welcome to My Blog </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8v2m9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=indigo aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/GISChat/gischat.github.io title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GISChat/gischat.github.io </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../introduction/ class=md-tabs__link> Introduction </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=./ class=md-tabs__link> Blog </a> </li> <li class=md-tabs__item> <a href=../about/release-notes/ class=md-tabs__link> About </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=GISChat class="md-nav__button md-logo" aria-label=GISChat data-md-component=logo> <img src=../assets/GISchat.png alt=logo> </a> GISChat </label> <div class=md-nav__source> <a href=https://github.com/GISChat/gischat.github.io title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GISChat/gischat.github.io </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../introduction/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <div class="md-nav__link md-nav__container"> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Blog </span> </a> <label class="md-nav__link md-nav__link--active" for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex> <span class=md-ellipsis> Archive </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Archive </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=archive/2024/ class=md-nav__link> <span class=md-ellipsis> 2024 </span> </a> </li> <li class=md-nav__item> <a href=archive/2023/ class=md-nav__link> <span class=md-ellipsis> 2023 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex> <span class=md-ellipsis> Categories </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Categories </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=category/hardware/ class=md-nav__link> <span class=md-ellipsis> hardware </span> </a> </li> <li class=md-nav__item> <a href=category/%E5%85%AC%E4%BC%97%E5%8F%B7/ class=md-nav__link> <span class=md-ellipsis> 公众号 </span> </a> </li> <li class=md-nav__item> <a href=category/%E6%96%87%E6%9C%AC%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 文本分析 </span> </a> </li> <li class=md-nav__item> <a href=category/%E6%9C%9F%E5%88%8A/ class=md-nav__link> <span class=md-ellipsis> 期刊 </span> </a> </li> <li class=md-nav__item> <a href=category/%E7%A7%91%E7%A0%94%E6%8A%80%E5%B7%A7/ class=md-nav__link> <span class=md-ellipsis> 科研技巧 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../about/release-notes/ class=md-nav__link> <span class=md-ellipsis> About </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 期刊之我见 </span> </a> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 基于树莓派打造你的个人感知终端 </span> </a> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 哪个城市是中央眼中的心头爱？基于新闻联播文本的大数据分析 </span> </a> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 基于多源传感器的城市人居环境与居民健康感知：中国武汉的案例研究 </span> </a> </li> <li class=md-nav__item> <a href=#2024 class=md-nav__link> <span class=md-ellipsis> 2024年度展望：无用之用&amp;公众号的朋友们 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <div class=md-content__inner> <header class=md-typeset> <h1 id=welcome-to-my-blog>Welcome to My Blog<a class=headerlink href=#welcome-to-my-blog title="Permanent link">&para;</a></h1> <p>Here you'll find the latest updates and posts.</p> </header> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img src="https://avatars.githubusercontent.com/u/18610440?s=400&u=bd04a4308341648feb80e4fc9cdc4c38914a7f72&v=4" alt=Ming,G> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2024-08-25 00:00:00">Aug 25, 2024</time></li> <li class=md-meta__item> in <a href=category/%E6%9C%9F%E5%88%8A/ class=md-meta__link>期刊</a></li> <li class=md-meta__item> 1 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=_1><a href=2024/08/25/PaperRank/ class=toclink>期刊之我见</a></h2> <p>正刊 大子刊 小子刊</p> <p>第一档：rse lup isprs wrr wr est gcb（顶刊）</p> <p>第二档：cities tgrs（次顶刊）</p> <p>第三档：jag scs hi ijgis 大ei（一区）</p> <p>第四档：jclp stoten（一区守门，仅两本）</p> <p>第五挡：jem,uf&amp;ug,eco ind （普通二区）</p> <p>第六档：rs land forests（二区水刊，博士）</p> <p>第七档：ijgi atmo sus 普通南核（三区-普通南核）</p> <p>第八档：普通北核（硕士）</p> <p>第九档：论文</p> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img src="https://avatars.githubusercontent.com/u/22789554?v=4" alt="Zhang, Y"> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2024-05-04 00:00:00">May 4, 2024</time></li> <li class=md-meta__item> in <a href=category/hardware/ class=md-meta__link>hardware</a></li> <li class=md-meta__item> 5 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=_1><a href=2024/05/04/raspberry_pi/ class=toclink>基于树莓派打造你的个人感知终端</a></h2> <p><img alt=cover_image src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image000.jpeg)></p> <h2 id=_2><a class=toclink href=2024/05/04/raspberry_pi/#_2>基于树莓派打造你的个人感知终端</a></h2> <p>原创 喵喵张 <a href=javascript:void\(0\);> 城市感知计算 </a></p> <p><strong>城市感知计算</strong></p> <p>微信号 sensingcity</p> <p>功能介绍 认识世界和改造世界，分享地理信息系统科普知识与学术研究，欢迎加好友学术交流。</p> <hr> <hr> <p>哈喽大家好，好久没有给大家带来好玩的东西了。这次给大家介绍下开发的小玩意，让大家联动手机与树莓派，来进行实时的监控。</p> <p>首先我们用的是一台树莓派4B，加装了一个摄像头，并安装了Raspber ry Pi OS系统。 这个系统大家一般购买的时候店家会发给你，自己按照教程烧录就好啦。</p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image001.jpeg)></p> <p>（购买的树莓派） </p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image002.jpeg)></p> <p>（进入到系统界面）</p> <p>然后最关键的是我们要安装Linux版本的opencv，这个步骤相对较难，我直接找了别人装好的镜像，安装到了树莓派里，其他的诸如miniconda等大家自行安装。然后进行以下测试，如果桌面正常采集出 example1.png 那么我们基本上可以完成剩下的步骤！</p> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li></li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> <p>import cv2import numpy as npcap = cv2.VideoCapture(0) # 注意：这个地方本文的图片里没有参数0，但是应该传入0f, frame = cap.read() # 此刻拍照cv2.imwrite("example1.png", frame) # 将拍摄内容保存为png图片cap.release() # 关闭调用的摄像头print('采集完成')</p> </li> </ul> <p>如果我们想对摄像头采集的内容进行感知，来判断是否存在场景变化（例如实现有行人经过进行抓拍），那么最简单的思路是，间隔一秒钟进行拍照，然后对比一秒钟前后的图像变化，计算哈希相似度，如果相似度低于0.8那么我们判断有人经过或者场景发生了改变~ </p> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li></li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> <p>def compare_image(self, file_image1, file_image2, size=(256, 256), part_size=(64, 64)): ''' 'file_image1'和'file_image2'是传入的文件路径 可以通过'Image.open(path)'创建'image1' 和 'image2' Image 对象. 'size' 重新将 image 对象的尺寸进行重置，默认大小为256 * 256 . 'part_size' 定义了分割图片的大小.默认大小为64*64 . 返回值是 'image1' 和 'image2'对比后的相似度，相似度越高，图片越接近，达到1.0说明图片完全相同。 '''<br> image1 = Image.open(file_image1) image2 = Image.open(file_image2)<br> img1 = image1.resize(size).convert("RGB") sub_image1 = self.split_image(img1, part_size)<br> img2 = image2.resize(size).convert("RGB") sub_image2 = self.split_image(img2, part_size)<br> sub_data = 0 for im1, im2 in zip(sub_image1, sub_image2): sub_data += self.calculate(im1, im2)<br> x = size[0] / part_size[0] y = size[1] / part_size[1]<br> pre = round((sub_data / (x * y)), 6) # print(str(pre * 100) + '%') print('Compare the image result is: ' + str(pre)) return pre</p> </li> </ul> <p>（写一下对比的代码）</p> <p>同时我们设置While循环，这个系统就可以一直运行啦。但是仅仅计算出来，没办法传送到移动设备，感觉这还是不够智能。我们就引入邮件的SMTP服务，让他自动进行戒备。我们这里使用的是网易163邮箱，相关授权请自行百度。</p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image003.jpeg)></p> <p>构造一个发邮箱请求： </p> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li></li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> <p>def sendEmail(content,title): sender = '<a href=mailto:XXX@163.com>&#88;&#88;&#88;&#64;&#49;&#54;&#51;&#46;&#99;&#111;&#109;</a>'# 我用的163邮箱 receivers = ['XXXX'] # 接收邮件，可设置为你的QQ邮箱或者其他邮箱<br> message_content = MIMEText(content, 'plain', 'utf-8')# 内容, 格式, 编码 message = MIMEMultipart('related') message['Subject'] = '摄像头识别检测' message['From'] = "{}".format(sender) message['To'] = ",".join(receivers) # message['Subject'] = title<br> # 第三方 SMTP 服务 mail_host = "smtp.163.com" # SMTP服务器 mail_user = "" # 用户名 mail_pass = "" #你的smtp密钥<br> img = MIMEImage(open('example1.png', 'rb').read(), _subtype='octet-stream') img.add_header('Content-Disposition', 'attachment', filename='example1.png') message.attach(img) message.attach(message_content) try: smtpObj = smtplib.SMTP_SSL(mail_host, 465) # 启用SSL发信, 端口一般是465 smtpObj.login(mail_user, mail_pass)# 登录验证 smtpObj.sendmail(sender, receivers, message.as_string())# 发送 print("mail has been send successfully.") except smtplib.SMTPException as e: print(e)</p> </li> </ul> <p>测试效果：</p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image004.jpeg)></p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image005.jpeg)></p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image006.jpeg)></p> <p>（手机收到邮件）</p> <p>其他的 一些好玩的，例如在树莓派上进行图像的边缘检测： </p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image007.jpeg)></p> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li></li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> <p>import cv2import numpy as npimg1=cv2.imread('/home/pi/Desktop/example1.png')img2=cv2.imread('/home/pi/Desktop/example2.png')# 从文件中读取图像image = cv2.imread('/home/pi/Desktop/example2.png', cv2.IMREAD_COLOR)# 将图像转换为灰度图gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)# 使用Canny算法进行边缘检测edges = cv2.Canny(gray, threshold1=30, threshold2=100)# 保存边缘检测结果的图像cv2.imwrite('edges_image.jpg', edges)# 显示原始图像和边缘检测结果cv2.imshow('Original', image)cv2.imshow('Edges', edges)# 等待用户按下任意键，然后关闭窗口cv2.waitKey(0)cv2.destroyAllWindows()</p> </li> </ul> <p>还可以 部署 yolos-tiny 来进行目标检测与识别~返回手机的信息可以更多，甚至可以接入大模型接口来进行场景描述（参见： <a href="http://mp.weixin.qq.com/s?__biz=Mzg4NTE4NDE4NQ==&mid=2247485131&idx=1&sn=63916194a684a430e202048089d62c5b&chksm=cfad851df8da0c0b451ddd8d84615f306a8827066b401c06094a734fe2b0ecf116d64a997dfc&scene=21#wechat_redirect"> 城市字幕，教你如何利用图像跨模态推理空间知识 </a> ）。后期我们还集成了人脸的年龄、情绪、族裔以及性别检测算法，也会将在接下来的教程中公开。</p> <p>做科学实验，数据的获取是非常关键的步骤，计划未来开发城市感知微型基站，集成更加多源的传感器，获取声热音光等多源信息，部署在车辆上，采集 一手的 城市数据，欢迎大家继续关注。</p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image008.jpeg)></p> <p>（采购了一些小的传感器）</p> <p>下一期继续给大家推送微博数据相关的技术与方法，教大家如何构建自己的公共事件社交媒体数据集，以下是一些前期文档：</p> <p><a href="http://mp.weixin.qq.com/s?__biz=Mzg4NTE4NDE4NQ==&mid=2247486392&idx=1&sn=20ef554a0fc1f6a479a4e788bb28d85a&chksm=cfad886ef8da017874def4219e51d9c44a77cccf165b6e644a854f73143976480906aa7c2cb1&scene=21#wechat_redirect"> 微博签到数据的获取思路与实战 </a> </p> <p><a href="http://mp.weixin.qq.com/s?__biz=Mzg4NTE4NDE4NQ==&mid=2247484476&idx=1&sn=7f8ce49069e18fb815d830ba4a6b92b1&chksm=cfad87eaf8da0efc6dfd0a4d5b0f7ec69f7dbbbdc77ce70c6288376489224f0b5f2fb04a0847&scene=21#wechat_redirect"> 城市微博签到数据分享&amp;地址解码与纠偏教程 </a> </p> <p><a href="http://mp.weixin.qq.com/s?__biz=Mzg4NTE4NDE4NQ==&mid=2247484322&idx=1&sn=98db573f18b95de2129cd4074fad82c2&chksm=cfad8074f8da096249a0f48e761ea67df01cbcf1e7e13294a3b51a717ea3fd36732661496669&scene=21#wechat_redirect"> 北京市含地理坐标的微博数据分享&amp;数据获取方法与科学研究问题 </a> </p> <p><a href="http://mp.weixin.qq.com/s?__biz=Mzg4NTE4NDE4NQ==&mid=2247486237&idx=1&sn=9685af5d3f7c550c9c69697bbba7f1dc&chksm=cfad88cbf8da01ddbbdcfc36c843f4ed3b556b423f3ab30a1190876d42c4b5415de331b01425&scene=21#wechat_redirect"> 超越微博，小红书数据采集数据、代码和思路 </a> </p> <p>最后是本文分享的全部代码： </p> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li></li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> <h2 id=-coding-utf-8-author-zytime-2020524-2021codingutf8import-osfrom-pil-import-imageimagedrawimagefileimport-numpyimport-pytesseractimport-cv2import-imagehashimport-collectionsimport-cv2time><a class=toclink href=2024/05/04/raspberry_pi/#-coding-utf-8-author-zytime-2020524-2021codingutf8import-osfrom-pil-import-imageimagedrawimagefileimport-numpyimport-pytesseractimport-cv2import-imagehashimport-collectionsimport-cv2time>-<em>- coding: UTF-8 -</em>-<strong>author</strong> = 'zy'<strong>time</strong> = '2020/5/24 20:21'#coding:utf8import osfrom PIL import Image,ImageDraw,ImageFileimport numpyimport pytesseract#import cv2#import imagehashimport collectionsimport cv2,time</a></h2> <p>def compare_image_with_hash(image_file1,image_file2, max_dif=0): """ max_dif: 允许最大hash差值, 越小越精确,最小为0 推荐使用 cv2.img_hash.averageHash """ ImageFile.LOAD_TRUNCATED_IMAGES = True hash_1 = None hash_2 = None with open(image_file1, 'rb') as fp: hash_1 = cv2.img_hash.averageHash(Image.open(fp)) print(hash_1) with open(image_file2, 'rb') as fp: hash_2 = cv2.img_hash.averageHash(Image.open(fp)) print(hash_2) dif = hash_1 - hash_2 print(dif) if dif &lt; 0: dif = -dif if dif &lt;= max_dif: return True else: return False<br> class CompareImage(): def calculate(self, image1, image2): g = image1.histogram() s = image2.histogram() assert len(g) == len(s), "error" data = [] for index in range(0, len(g)): if g[index] != s[index]: data.append(1 - abs(g[index] - s[index]) / max(g[index], s[index])) else: data.append(1) return sum(data) / len(g) </p> <div class="language-text highlight"><pre><span></span><code>def split_image(self, image, part_size):        pw, ph = part_size        w, h = image.size        sub_image_list = []        assert w % pw == h % ph == 0, &quot;error&quot;        for i in range(0, w, pw):            for j in range(0, h, ph):                sub_image = image.crop((i, j, i + pw, j + ph)).copy()                sub_image_list.append(sub_image)  
    return sub_image_list

def compare_image(self, file_image1, file_image2, size=(256, 256), part_size=(64, 64)):        &#39;&#39;&#39;        &#39;file_image1&#39;和&#39;file_image2&#39;是传入的文件路径         可以通过&#39;Image.open(path)&#39;创建&#39;image1&#39; 和 &#39;image2&#39; Image 对象.         &#39;size&#39; 重新将 image 对象的尺寸进行重置，默认大小为256 * 256 .         &#39;part_size&#39; 定义了分割图片的大小.默认大小为64*64 .         返回值是 &#39;image1&#39; 和 &#39;image2&#39;对比后的相似度，相似度越高，图片越接近，达到1.0说明图片完全相同。        &#39;&#39;&#39;  
    image1 = Image.open(file_image1)        image2 = Image.open(file_image2)  
    img1 = image1.resize(size).convert(&quot;RGB&quot;)        sub_image1 = self.split_image(img1, part_size)  
    img2 = image2.resize(size).convert(&quot;RGB&quot;)        sub_image2 = self.split_image(img2, part_size)  
    sub_data = 0        for im1, im2 in zip(sub_image1, sub_image2):            sub_data += self.calculate(im1, im2)  
    x = size[0] / part_size[0]        y = size[1] / part_size[1]  
    pre = round((sub_data / (x * y)), 6)        # print(str(pre * 100) + &#39;%&#39;)        print(&#39;Compare the image result is: &#39; + str(pre))        return pre
</code></pre></div> <p>import smtplib,timefrom email.mime.text import MIMETextfrom email.mime.image import MIMEImagefrom email.mime.multipart import MIMEMultipart<br> def sendEmail(content,title): sender = '<a href=mailto:XXX@163.com>&#88;&#88;&#88;&#64;&#49;&#54;&#51;&#46;&#99;&#111;&#109;</a>'# 我用的163邮箱 receivers = ['XXXX'] # 接收邮件，可设置为你的QQ邮箱或者其他邮箱<br> message_content = MIMEText(content, 'plain', 'utf-8')# 内容, 格式, 编码 message = MIMEMultipart('related') message['Subject'] = '摄像头识别检测' message['From'] = "{}".format(sender) message['To'] = ",".join(receivers) # message['Subject'] = title<br> # 第三方 SMTP 服务 mail_host = "smtp.163.com" # SMTP服务器 mail_user = "" # 用户名 mail_pass = "" #你的smtp密钥<br> img = MIMEImage(open('example1.png', 'rb').read(), <em>subtype='octet-stream') img.add_header('Content-Disposition', 'attachment', filename='example1.png') message.attach(img) message.attach(message_content) try: smtpObj = smtplib.SMTP_SSL(mail_host, 465) # 启用SSL发信, 端口一般是465 smtpObj.login(mail_user, mail_pass)# 登录验证 smtpObj.sendmail(sender, receivers, message.as_string())# 发送 print("mail has been send successfully.") except smtplib.SMTPException as e: print(e)<br> if __name_</em>=='<strong>main</strong>':<br> while True: cap = cv2.VideoCapture(0) # 注意：这个地方本文的图片里没有参数0，但是应该传入0 f, frame = cap.read() # 此刻拍照 cv2.imwrite("example1.png", frame) # 将拍摄内容保存为png图片 cap.release() # 关闭调用的摄像头 print('采集完成') time.sleep(1)<br> cap = cv2.VideoCapture(0) # 注意：这个地方本文的图片里没有参数0，但是应该传入0 f, frame = cap.read() # 此刻拍照 cv2.imwrite("example2.png", frame) # 将拍摄内容保存为png图片 cap.release() # 关闭调用的摄像头<br> compare_image = CompareImage() result=compare_image.compare_image("example1.png","example2.png") print(result) if result&lt;0.8: sendEmail(str(result), '温度测试反馈结果')</p> </li> </ul> <p>预览时标签不可点</p> <p>微信扫一扫<br> 关注该公众号</p> <hr> <hr> <p>收藏</p> <p>精选留言</p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image009.jpeg)></p> <p>Accio来自上海</p> <p>太牛啦！准备入手树莓派当新玩具了哈哈哈</p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image009.jpeg)></p> <p>未命名用户来自上海</p> <p>我也想玩儿，哈哈哈，准备弄个二手的试试</p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image009.jpeg)></p> <p>未命名用户来自上海</p> <p>玩！大胆玩！[耶]</p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image009.jpeg)></p> <p>未命名用户来自北京</p> <p>嘿嘿 好滴[好的]</p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image009.jpeg)></p> <p>我直接阿炎来自河北</p> <p>看完直接激发兴趣，研究一下[嘿哈]</p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image009.jpeg)></p> <p>wy来自中国香港</p> <p>太有意思了！我说你桌子上放的是什么呢[哇]</p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image015.jpeg)></p> <p>城市感知计算来自</p> <p>哈哈哈</p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image016.jpeg)></p> <p>老张来自河南</p> <p>我也想买几个玩玩，觉得挺有意思里。可以锻炼自己动手的能力</p> <p><img alt src=![20240504基于树莓派打造你的个人感知终端](20240504基于树莓派打造你的个人感知终端/image009.jpeg)></p> <p>兰spring来自河南</p> <p>有意思</p> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img src="https://avatars.githubusercontent.com/u/22789554?v=4" alt="Zhang, Y"> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2024-01-20 00:00:00">Jan 20, 2024</time></li> <li class=md-meta__item> in <a href=category/%E6%96%87%E6%9C%AC%E5%88%86%E6%9E%90/ class=md-meta__link>文本分析</a></li> <li class=md-meta__item> 2 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=_1><a href=2024/01/20/skill/ class=toclink>哪个城市是中央眼中的心头爱？基于新闻联播文本的大数据分析</a></h2> <p><img alt=cover_image src=img/20240120%E5%93%AA%E4%B8%AA%E5%9F%8E%E5%B8%82%E6%98%AF%E4%B8%AD%E5%A4%AE%E7%9C%BC%E4%B8%AD%E7%9A%84%E5%BF%83%E5%A4%B4%E7%88%B1%E5%9F%BA%E4%BA%8E%E6%96%B0%E9%97%BB%E8%81%94%E6%92%AD%E6%96%87%E6%9C%AC%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/image000.jpeg></p> <h2 id=_2><a class=toclink href=2024/01/20/skill/#_2>哪个城市是中央眼中的心头爱？基于新闻联播文本的大数据分析</a></h2> <p>原创 喵喵张 <a href=javascript:void\(0\);> 城市感知计算 </a></p> <p><strong>城市感知计算</strong></p> <p>微信号 sensingcity</p> <p>功能介绍 认识世界和改造世界，分享地理信息系统科普知识与学术研究，欢迎加好友学术交流。</p> <hr> <hr> <p>又到了年底数据大盘点的时刻，在过去的一年里，哪个城市在中央眼中获得了更多的关注呢？新闻联播作为国家意志的传声筒，无疑代表了相当程度上的国家关注。本次分析的数据来自于央视网，遍历其页面，检索获取了2023年至今的所有新闻联播文本。</p> <p><img alt=20240120哪个城市是中央眼中的心头爱基于新闻联播文本的大数据分析 src=img/20240120%E5%93%AA%E4%B8%AA%E5%9F%8E%E5%B8%82%E6%98%AF%E4%B8%AD%E5%A4%AE%E7%9C%BC%E4%B8%AD%E7%9A%84%E5%BF%83%E5%A4%B4%E7%88%B1%E5%9F%BA%E4%BA%8E%E6%96%B0%E9%97%BB%E8%81%94%E6%92%AD%E6%96%87%E6%9C%AC%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/image001.jpeg> 共检索了384天的数据，约有9000条各类新闻播报。从这些语料中检索中国344个城市出现次数，以解释这些城市在国家政治、经济或社会方面的重要性。靠前出现的次数是北京、上海、杭州、重庆、成都、吉林（省市）、天津、广州、深圳、西安、台湾、厦门等等。而我国的经济前列的城市则是上海、北京、深圳、重庆、广州、苏州、成都、杭州、武汉、南京，如果建立在更长时间序列，来看城市在新闻联播中的关注度移动，相信也是一个很有趣的话题。</p> <p><img alt=20240120哪个城市是中央眼中的心头爱基于新闻联播文本的大数据分析 src=img/20240120%E5%93%AA%E4%B8%AA%E5%9F%8E%E5%B8%82%E6%98%AF%E4%B8%AD%E5%A4%AE%E7%9C%BC%E4%B8%AD%E7%9A%84%E5%BF%83%E5%A4%B4%E7%88%B1%E5%9F%BA%E4%BA%8E%E6%96%B0%E9%97%BB%E8%81%94%E6%92%AD%E6%96%87%E6%9C%AC%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/image002.jpeg></p> <p><img alt=20240120哪个城市是中央眼中的心头爱基于新闻联播文本的大数据分析 src=img/20240120%E5%93%AA%E4%B8%AA%E5%9F%8E%E5%B8%82%E6%98%AF%E4%B8%AD%E5%A4%AE%E7%9C%BC%E4%B8%AD%E7%9A%84%E5%BF%83%E5%A4%B4%E7%88%B1%E5%9F%BA%E4%BA%8E%E6%96%B0%E9%97%BB%E8%81%94%E6%92%AD%E6%96%87%E6%9C%AC%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/image003.jpeg></p> <p>把这些城市可视化出来~除了长三角城市外，好像北方的城市更容易被提及诶。除了西部三省外，云贵地区的声量也较弱，长江中游的十余个城市除了武汉南昌长沙外，其余城市也基本上属于“小透明”。</p> <p><img alt=20240120哪个城市是中央眼中的心头爱基于新闻联播文本的大数据分析 src=img/20240120%E5%93%AA%E4%B8%AA%E5%9F%8E%E5%B8%82%E6%98%AF%E4%B8%AD%E5%A4%AE%E7%9C%BC%E4%B8%AD%E7%9A%84%E5%BF%83%E5%A4%B4%E7%88%B1%E5%9F%BA%E4%BA%8E%E6%96%B0%E9%97%BB%E8%81%94%E6%92%AD%E6%96%87%E6%9C%AC%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/image004.jpeg></p> <p>附送本文所使用的数据抓取代码，如果有时间可以绘制近10年来的城市关注度转移情况，相信也会是很有意思的事情，有空剪辑一个视频出来hhh 。</p> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li></li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> <p>import requestsimport pandas as pdfrom bs4 import BeautifulSoupfrom datetime import datetime, timedelta# Function to extract details from a video linkdef get_video_details(video_url): res_video = requests.get(video_url) res_video.encoding = 'utf-8'    soup_video = BeautifulSoup(res_video.text, 'html.parser') title = soup_video.find('title').text description = soup_video.find('meta', {'name': 'description'})['content'] source = soup_video.find('span', class_='laiyuan').text time = soup_video.find('span', class_='time').text    content = soup_video.find('div', id='content_area').text.strip() return f"标题: {title}\n描述: {description}\n来源: {source}\n时间: {time}\n内容: {content}"# Initialize DataFramedf = pd.DataFrame(columns=['Video Title', 'Video Link', 'Video Image', 'Video Duration'])# Specify the date rangestart_date = datetime.strptime('20230101', '%Y%m%d')end_date = datetime.today() </p> <h2 id=iterate-over-each-day-in-the-date-rangewhile-start_date-end_date-date_str-start_datestrftimeymd-url-fhttpstvcctvcomlmxwlbdaydate_strshtml><a class=toclink href=2024/01/20/skill/#iterate-over-each-day-in-the-date-rangewhile-start_date-end_date-date_str-start_datestrftimeymd-url-fhttpstvcctvcomlmxwlbdaydate_strshtml>Iterate over each day in the date rangewhile start_date &lt;= end_date: date_str = start_date.strftime('%Y%m%d') url = f'<a href=https://tv.cctv.com/lm/xwlb/day/{date_str}.shtml>https://tv.cctv.com/lm/xwlb/day/{date_str}.shtml</a>'</a></h2> <div class="language-text highlight"><pre><span></span><code># Fetch HTML content    res = requests.get(url)    res.encoding = &#39;utf-8&#39;    html_code = res.text    soup = BeautifulSoup(html_code, &#39;html.parser&#39;)  
# Extract information from each video entry    for li in soup.find_all(&#39;li&#39;):        a_tag = li.find(&#39;a&#39;, {&#39;alt&#39;: True})        if a_tag:            video_title = a_tag.get(&#39;alt&#39;)            video_link = li.find(&#39;a&#39;, {&#39;href&#39;: True}).get(&#39;href&#39;)            video_image = li.find(&#39;img&#39;).get(&#39;src&#39;)            video_duration = li.find(&#39;span&#39;).text  
        # Append the extracted information to the DataFrame            df = df.append({&#39;Video Title&#39;: video_title,                            &#39;Video Link&#39;: video_link,                            &#39;Video Image&#39;: video_image,                            &#39;Video Duration&#39;: video_duration}, ignore_index=True)    # Print or use the DataFrame as needed    df[&#39;Details&#39;] = df[&#39;Video Link&#39;].apply(get_video_details)    # Save DataFrame to CSV    df.to_csv(f&#39;videos_{date_str}.csv&#39;, index=False)    # Clear the DataFrame for the next iteration    df = pd.DataFrame(columns=[&#39;Video Title&#39;, &#39;Video Link&#39;, &#39;Video Image&#39;, &#39;Video Duration&#39;])    # Move to the next day    start_date += timedelta(days=1)
</code></pre></div> </li> </ul> <p>预览时标签不可点</p> <p>微信扫一扫<br> 关注该公众号</p> <hr> <hr> <p>收藏</p> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img src="https://avatars.githubusercontent.com/u/22789554?v=4" alt="Zhang, Y"> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2023-07-10 00:00:00">Jul 10, 2023</time></li> <li class=md-meta__item> in <a href=category/%E7%A7%91%E7%A0%94%E6%8A%80%E5%B7%A7/ class=md-meta__link>科研技巧</a></li> <li class=md-meta__item> 4 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=_1><a href=2023/07/10/skill/ class=toclink>基于多源传感器的城市人居环境与居民健康感知：中国武汉的案例研究</a></h2> <p>测试用</p> <nav class=md-post__action> <a href=2023/07/10/skill/ > Continue reading </a> </nav> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img src="https://avatars.githubusercontent.com/u/22789554?v=4" alt="Zhang, Y"> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2023-07-10 00:00:00">Jul 10, 2023</time></li> <li class=md-meta__item> in <a href=category/%E5%85%AC%E4%BC%97%E5%8F%B7/ class=md-meta__link>公众号</a></li> <li class=md-meta__item> 2 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=2024><a href=2023/07/10/friends/ class=toclink>2024年度展望：无用之用&amp;公众号的朋友们</a></h2> <p><img alt=cover_image src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/S9HsqSVeUquibYBP34vjx4ibKvTJlLYHYvFJNr60vW9mTkswes93LSx8icPtEZnlL6ArCLcXdHQkpb2xOAO45ibBHw/0?wx_fmt=jpeg"></p> <h2 id=2024_1><a class=toclink href=2023/07/10/friends/#2024_1>2024年度展望：无用之用&amp;公众号的朋友们</a></h2> <p>原创 喵喵张 <a href=javascript:void\(0\);> 城市感知计算 </a></p> <p><strong>城市感知计算</strong></p> <p>微信号 sensingcity</p> <p>功能介绍 认识世界和改造世界，分享地理信息系统科普知识与学术研究，欢迎加好友学术交流。</p> <hr> <hr> <p>哈喽大家好，我是博主张喵喵。经过了一年的更新，相较于去年的年度总结（ <a href="http://mp.weixin.qq.com/s?__biz=Mzg4NTE4NDE4NQ==&mid=2247484993&idx=1&sn=262f6da0cb48b8ae207538415c8398c9&chksm=cfad8597f8da0c813e13c70fbea40a8d8caf1cd5d803f7e4dea96aa2e696ba025be48ba02940&scene=21#wechat_redirect"> 2022年度总结，2023年度展望&amp;这里是中国抽奖） 我们多了 </a> 5000+的 朋友们，订阅即将突破10000啦，除了大家的关注，还有相当多（20+）的姊妹公众号提供了帮助或者转载，做了简单的拼图，如下所示： <img alt src="https://mmbiz.qpic.cn/sz_mmbiz_png/S9HsqSVeUquibYBP34vjx4ibKvTJlLYHYv5BO569e8pVwTFdmyFb98EAeSZ095kiaWyE2Sk9ysCd0PjcIfYTavr1g/640?wx_fmt=png&from=appmsg"> 好多号主都是很好的朋友，与所有的公众号的订阅者一起撑起了这个窄窄的小社区。<br> 这一年，写了大概40篇原创文章，每一篇文章都是精心打磨，阅读量也非常喜人。特别是微信公众号改版，改为了小红书类似的推荐机制，做到一万个阅读相对容易了很多，已经有3篇文章突破了万次阅读，甚至推出了爆款单篇接近9万个阅读。这是摸鱼的23年12月的阅读量，可以看到&#8531;都是由推荐带来的：</p> <p><img alt src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/S9HsqSVeUqu8jFcOQp63f10zfskpFAA5ZU90actcKVNzCvtRrFKzrnch1LibkJKsOgmTM6Mp0P9PNhL4ZBeBcrQ/640?wx_fmt=jpeg"></p> <p>去年的年终总结，定下了公众号的3个基调：第一是 用完即走，不做停留 ， 目的是为了追求这项工作的持续性和连贯性，以内容的克制来增强它的生命力。 第二个 做公众号的原则 是 <strong>“不做打扰，润物无声”</strong> ，同样是不会因为短期的利益来打扰订阅者。 第三个 做公众号的原则 是 <strong>“无门槛，不商业”</strong> 。为知识不设限制，在过去的一年既没有开底部广告又没有接第三方的广告，实际上过去的一年有5位以上的关于教育培训、行业资讯相关的“金主”联系投放广告，一一被我拒绝，这也是为了给订阅者带来更好的视听体验，虽然文章数量少但是依然保持高质量，每一篇都经过我仔细的筛选，确保给订阅者最佳的阅读反馈。当文字有了生命，每一篇推送都成为了以上三个理念的载体，来进一步的吸引志同道合的伙伴，追求质量而非数量，共同结识、成长，维护与 建设 社区。 今 年的年度总结的主题是： <strong>无用之用</strong> 。生活中大家大部分时间都会应用在大多数人所认为有用的事情上，然而大部分认为是有用的工作，东西放到更长的时间序列中也是无用的，而很多无心的工作反而流传时间会更久。本科的时候，学习了很多专业知识，然而大部分对我都没有任何影响，偶然的一天在朋友的学校读了一个学生发表的短文专辑，却让我一直铭记。虽然我不认识这个作者，但是恰好在那个时候，这篇文章对我的影响却很大，这就是无用之用。举个更简单的例子，大家小时候背很多的古文，咿咿呀呀却并不了解具体的内容，常常会被认作无用之用，然而无用的东西却是有大用的，漂泊在外往往会想到床前明月光，中秋节往往会想到遍插茱萸少一人， 婚恋则会想到 画眉深浅入时无 ， 春天下雨往往会想到天街小雨润如酥，更勿论“上岸”后的春风得意马蹄疾了，无意间， <strong>每个人都完成了一次心灵上穿越千年的跨越与相通</strong> 。 花了很多时间在现在看来很无用的事情，但是与有用的事情所带来的体验是完全迥异的，我之前也分享过很多自己的无用之用“ <a href="http://mp.weixin.qq.com/s?__biz=Mzg4NTE4NDE4NQ==&mid=2247484749&idx=2&sn=f07fabc289c07b420bf879fd86a2b97e&chksm=cfad869bf8da0f8d6eef0fc2e340dfd2bc73f2d06b8fb8720ee72137923c3a9b4b89b3b31c12&scene=21#wechat_redirect"> 湖前觅渡 山上指灯 (我的一点碎碎念) </a> ”。 同样的， 我认为好的 研究 不仅需要在专业上 精 进，并且要在内容上更加通俗易懂，更加贴近普罗大众的日常生活。 <strong>故事会与顶级期刊的杂志，你能说谁更高尚吗</strong> ，只要它能够给一个个体带来新的视角与不一样的感受，这就是这个人的“顶级期刊”，好的作品是要在社会上来检验成色的。 有一次有位记者采访郭德纲，问怎么看待自己的相声和传统的相声，他的回答我比较赞同，他认为商演是衡量相声价值的试金石，观众愿意花时间精力去看已经说明了人心向背，观众认为是有价值的。同样的，现在网络直播说相声，只要有人愿意去看，则是存在即合理，一次次革新都是对传统既得利益的一次冲击，大众都是 用脚投票的 。我想以后分享的内 容还会坚持这个原则，坚持无用之用，不做眼前的 功利的事情，不会做简单的数据分享，一个工具博主，吸引的更多是伸手党，这种来得快也去的快，与我们的三点建设初衷是完全违背的。 新的一年里，我们继续坚持了这三个原则。 苛责的追求文章的质量，更是为了尊重每一位读者的时间和精力。 在当前这个信息爆炸的时代，坚持选择走一条不同的路。 放弃眼前的一些利益，致力于打造一个有温度、有深度的阅读空间。 希望这些 ** “无用”的内容， 能够经受时间考验，能够经得起用户用脚投票的认可。 **</p> <p>预览时标签不可点</p> <p>微信扫一扫<br> 关注该公众号</p> <hr> <hr> <p>收藏</p> </div> </article> <nav class=md-pagination> </nav> </div> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 GISChat </div> </div> <div class=md-social> <a href=https://github.com/GISchat target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.indexes", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "header.autohide"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.fe8b6f2b.min.js></script> </body> </html>